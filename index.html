<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Zîn Elhac</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Kufi+Arabic:wght@200;300;400;500&display=swap" rel="stylesheet">
  <style>
    :root{ --c1:#f5f0eb; --c2:#b36932; --c3:#626a48; --c4:#faf7f5; --c5:#e7dbd0; --c6:#c65c75; --ink: var(--c3); --headerH:70px; --footerH:64px; --max:1260px; --ease: cubic-bezier(.16,.92,.18,1); }
    *{box-sizing:border-box;} body{margin:0; color:var(--ink); background: var(--c4); font-family: "Noto Kufi Arabic", sans-serif; font-weight: 300; overflow-x:hidden;}
    a{color:inherit; text-decoration:none;} button{font-family:inherit; color:inherit;}
    .bg-veil{position:fixed; inset:0; z-index:-1; background: linear-gradient(180deg, #faf7f5 86%, #f5f0eb 100%); backdrop-filter: blur(10px);}
    header{position:fixed; inset:0 0 auto 0; height:var(--headerH); z-index:50; background: rgba(250,247,245,0.8); backdrop-filter: blur(16px); border-bottom:1px solid #e7dbd0;}
    .header-inner{height:100%; width:min(var(--max), calc(100% - 40px)); margin:0 auto; display:flex; align-items:center; justify-content:space-between;}
    nav{display:flex; gap:22px; align-items:center;}
    .nav-item{font-size:14px; font-weight:400; opacity:.8; transition:0.2s;}
    .nav-item:hover{opacity:1; transform:translateY(-1px);}
    .nameblock{text-align:center; min-width:190px;}
    .name-top{font-weight:400; font-size:15px;}
    .name-sep{width:120px; height:1px; background: linear-gradient(90deg, #e7dbd0, #626a48, #e7dbd0); margin:4px auto;}
    .name-ar{font-size:14px; direction:rtl; opacity:.7;}
    main{padding-top:var(--headerH); padding-bottom:var(--footerH);}
    section{min-height:80vh; padding:40px 0; transition: 0.4s;}
    .wrap{width:min(var(--max), calc(100% - 40px)); margin:0 auto;}
    .btn{padding:12px 24px; border:1px solid #e7dbd0; background:none; cursor:pointer; transition:0.3s;}
    .btn.primary{background: var(--c6); color: white; border:none;}
    .modal{position:fixed; inset:0; background: rgba(98,106,72,0.3); backdrop-filter:blur(10px); display:none; align-items:center; justify-content:center; z-index:100; opacity:0; transition:0.3s;}
    .modal.open{display:flex; opacity:1;}
    .modal-card{background: white; width:min(600px, 90%); max-height:90vh; overflow-y:auto; padding:20px; box-shadow:0 20px 40px rgba(0,0,0,0.1);}
    .field{margin-bottom:15px;} label{display:block; font-size:12px; margin-bottom:5px;}
    input, select, textarea{width:100%; padding:10px; border:1px solid #e7dbd0; background:#faf7f5;}
    .submit{width:100%; background:var(--c6); color:white; border:none; padding:15px; cursor:pointer; font-weight:bold;}
    .submit:disabled{opacity:0.5; cursor:not-allowed;}
    .toast{position:fixed; bottom:80px; left:50%; transform:translateX(-50%); background:white; padding:10px 20px; border:1px solid #e7dbd0; display:none; z-index:200;}
  </style>
</head>
<body>
  <div class="bg-veil"></div>
  <header>
    <div class="header-inner">
      <nav>
        <a class="nav-item" href="#ben-kimim">Ben kimim</a>
        <a class="nav-item" href="#tekli-seanslar">Seanslar</a>
        <a class="nav-item" href="#paketler">Paketler</a>
        <button class="nav-item" style="background:none; border:none; cursor:pointer;" onclick="openModal()">İletişim</button>
      </nav>
      <div class="nameblock">
        <div class="name-top">Zîn Elhac</div>
        <div class="name-sep"></div>
        <div class="name-ar">زين إلحق</div>
      </div>
    </div>
  </header>

  <main>
    <section id="ben-kimim">
      <div class="wrap">
        <h2>Ben kimim</h2>
        <p>Yaşam koçluğu yolculuğunuzda size rehberlik ediyorum.</p>
        <button class="btn primary" onclick="openModal()">Benimle iletişime geç</button>
      </div>
    </section>
  </main>

  <div class="modal" id="contactModal">
    <div class="modal-card">
      <div style="display:flex; justify-content:space-between; margin-bottom:20px;">
        <strong>İletişim Formu</strong>
        <button onclick="closeModal()" style="border:none; background:none; font-size:20px; cursor:pointer;">&times;</button>
      </div>
      <form id="contactForm">
        <div class="field"><label>Ad Soyad</label><input type="text" name="name" required></div>
        <div class="field"><label>E-posta</label><input type="email" name="email" required></div>
        <div class="field"><label>Mesaj</label><textarea name="message" rows="4"></textarea></div>
        <button type="submit" class="submit" id="submitBtn">Gönder</button>
      </form>
    </div>
  </div>

  <div id="toast" class="toast"></div>

  <script>
    const modal = document.getElementById('contactModal');
    const form = document.getElementById('contactForm');
    const btn = document.getElementById('submitBtn');
    const toast = document.getElementById('toast');

    function openModal() { modal.classList.add('open'); }
    
    function closeModal() { 
      modal.classList.remove('open');
      form.reset(); // Kutuyu kapatınca içindekileri sıfırlar
    }

    function showToast(msg) {
      toast.textContent = msg;
      toast.style.display = 'block';
      setTimeout(() => { toast.style.display = 'none'; }, 3000);
    }

    form.onsubmit = async (e) => {
      e.preventDefault();
      btn.disabled = true;
      btn.textContent = 'Gönderiliyor...';

      const formData = new FormData(form);
      const data = Object.fromEntries(formData.entries());

      try {
        const response = await fetch('/api/lead', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(data)
        });

        if (response.ok) {
          showToast('Mesajınız başarıyla gönderildi!');
          closeModal(); // Formu sıfırlar ve kapatır
        } else {
          showToast('Bir hata oluştu. Lütfen tekrar deneyin.');
        }
      } catch (err) {
        showToast('Bağlantı hatası!');
      } finally {
        btn.disabled = false;
        btn.textContent = 'Gönder';
      }
    };

    // Dışarı tıklayınca kapat
    window.onclick = (e) => { if (e.target == modal) closeModal(); }
  </script>
</body>
</html>
