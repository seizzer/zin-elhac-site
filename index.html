<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Zin Diary | زين الحاج</title>
  <meta name="description" content="Zîn Elhac — yaşam koçluğu seans ve paketleri" />

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Kufi+Arabic:wght@200;300;400;500;600&display=swap" rel="stylesheet">
  
  <link rel="icon" href="favicon.png?v=3" type="image/png">

  <style>
    :root{
      /* PALETTE */
      --c1:#f5f0eb; --c2:#b36932; --c3:#626a48; --c4:#faf7f5; --c5:#e7dbd0; --c6:#c65c75;
      --bg-cream: #FCFBF9; /* İstenen özel arka plan rengi */
      --ink: var(--c3);
      --inkSoft: color-mix(in srgb, var(--c3) 70%, transparent);
      --headerH:70px; --footerH:64px; 
      --ease: cubic-bezier(.16,.92,.18,1); 
      
      /* Responsive Margin Hesabı (1920px'de 100px ise %5.2 civarı) */
      --side-margin: 5.2vw; 
    }

    *{box-sizing:border-box;}
    html,body{height:100%;}
    html{scroll-behavior:smooth;}
    body{
      margin:0; color:var(--ink); background: var(--bg-cream);
      font-family: "Noto Kufi Arabic", Arial, sans-serif;
      font-weight: 300; overflow-x:hidden;
    }
    a{color:inherit; text-decoration:none;}
    button{font-family:inherit; color:inherit;}
    ::selection{background: color-mix(in srgb, var(--c6) 20%, transparent);}

    /* HEADER */
    header{
      position:fixed; inset:0 0 auto 0; height:var(--headerH); z-index:50;
      background: color-mix(in srgb, var(--bg-cream) 85%, transparent);
      backdrop-filter: blur(12px);
      border-bottom:1px solid rgba(0,0,0,0.03);
      padding: 0 var(--side-margin); /* 100px boşluk kuralı */
      transition: padding 0.3s ease;
    }
    .header-inner{
      height:100%; width:100%; margin:0;
      display:flex; align-items:center; justify-content:space-between;
    }
    
    /* LOGO: Tıklanamaz, Seçilemez, Sadece Zin | Zin */
    .logo-block{
      display:flex; flex-direction:column; align-items:center; justify-content:center;
      gap:2px; line-height:1; text-align:center;
      user-select: none; pointer-events: none; /* Tıklanamaz ve Seçilemez */
      margin-right: 12px; /* Hafif sağa çekildi */
    }
    .logo-top{font-weight:400; font-size:17px; letter-spacing:.02em; color:var(--c3);}
    .logo-sep{
      width:60px; height:1px; background: linear-gradient(90deg, transparent, var(--c3), transparent); opacity: .6; margin: 2px 0;
    }
    .logo-ar{font-weight:400; font-size:16px; color: color-mix(in srgb, var(--c3) 80%, transparent);}

    /* NAV: Sola Yaslı, Font Büyük */
    nav{
        display:flex; gap:24px; align-items:center; justify-content:flex-start; /* Sola yaslı */
        flex:1; margin-right: 60px; /* Logo ile araya mesafe */
    }
    .nav-item{
      position:relative; padding:10px 0; font-weight:400; 
      font-size: 17px; /* Font büyütüldü */
      letter-spacing:.01em;
      color: color-mix(in srgb, var(--c3) 78%, transparent);
      transition:color 180ms var(--ease);
      cursor: pointer;
    }
    .nav-item:hover{color: var(--c3);}

    /* FOOTER (Değişmedi) */
    footer{
      position:fixed; inset:auto 0 0 0; height:var(--footerH); z-index:50;
      background: color-mix(in srgb, var(--bg-cream) 80%, transparent);
      backdrop-filter: blur(16px); border-top:1px solid rgba(0,0,0,0.03);
    }
    .footer-inner{
      height:100%; width:min(1260px, calc(100% - 40px)); margin:0 auto;
      display:flex; align-items:center; justify-content:center;
    }
    .social{display:flex; gap:14px;}
    .icon-btn{width:24px; height:24px; color:var(--c3); opacity:.8; transition:opacity .2s;}
    .icon-btn:hover{opacity:1;}
    .icon{width:100%; height:100%; fill:currentColor;}
    
    main{padding-top:0; padding-bottom:var(--footerH);}

    /* ORTAK SECTION YAPISI */
    section{
      min-height: 100vh; position: relative;
      padding: 60px var(--side-margin); /* Yanlardan 100px boşluk */
      display: flex; flex-direction: column; justify-content: center;
    }

    .section-head{margin-bottom: 40px; text-align: right;}
    .section-head h2{
        font-size: 36px; font-weight: 400; margin: 0; color: var(--c3);
        padding-bottom: 12px; border-bottom: 1px solid rgba(0,0,0,0.05); display: inline-block;
    }

    /* 1. SECTION: HERO (MOTTO) */
    #hero {
        padding: 0; align-items: center; justify-content: center; overflow: hidden;
        background-color: var(--c1);
    }
    .hero-bg {
        position: absolute; inset: 0; 
        background-image: url('motto.jpg'); background-size: cover; background-position: center;
        z-index: 0;
    }
    .hero-overlay {
        position: absolute; inset: 0;
        background: rgba(255,255,255,0.05); /* Şeffaf */
        backdrop-filter: blur(4px); /* Hafif flu */
        z-index: 1;
    }
    .hero-content {
        position: relative; z-index: 2; text-align: center; color: #fff; /* Motto rengi */
        max-width: 800px; padding: 20px;
    }
    .motto-text {
        font-size: clamp(24px, 4vw, 42px); font-weight: 600; line-height: 1.4;
        color: var(--c3); /* Arka plan açıksa koyu renk yazı */
        text-shadow: 0 2px 10px rgba(255,255,255,0.5);
    }
    .scroll-btn {
        position: absolute; bottom: 80px; left: 50%; transform: translateX(-50%); z-index: 10;
        padding: 14px 32px; border: 1px solid var(--c3); color: var(--c3);
        font-size: 16px; background: rgba(255,255,255,0.3); backdrop-filter: blur(4px);
        border-radius: 50px; cursor: pointer; transition: all 0.3s ease;
    }
    .scroll-btn:hover { background: var(--c3); color: #fff; }

    /* 2. SECTION: SEANSLAR */
    #seanslar {
        background-color: var(--bg-cream);
    }
    .sessions-grid {
        display: flex; justify-content: center; gap: 40px; flex-wrap: wrap;
    }
    .session-card {
        flex: 0 1 450px; /* Geniş kartlar */
        background: var(--bg-cream); /* Section ile aynı renk */
        border: 1px solid rgba(0,0,0,0.08); /* İnce çerçeve */
        border-radius: 12px; overflow: hidden;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        cursor: pointer; position: relative;
    }
    .session-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 15px 30px rgba(98, 106, 72, 0.15); /* Orta kuvvet gölge */
    }
    .card-img {
        width: 100%; aspect-ratio: 1/1; /* Kare Fotoğraf */
        background-size: cover; background-position: center;
        border-bottom: 1px solid rgba(0,0,0,0.05);
    }
    #img-s1 { background-image: url('seans 1.jpg'); } /* Sağdaki */
    #img-s2 { background-image: url('seans 2.jpg'); } /* Soldaki */

    .card-meta {
        padding: 24px; text-align: center;
    }
    .card-title {
        font-size: 24px; font-weight: 600; color: var(--c3); margin-bottom: 8px;
    }
    .card-desc { font-size: 14px; color: var(--inkSoft); line-height: 1.6; }

    /* 3. SECTION: HAKKIMDA (Paketler yerine geldi) */
    #hakkimda {
        background-color: var(--c4); /* Hafif farklı ton ayrışması için */
    }
    .about-layout {
        display: grid; grid-template-columns: 1fr 1fr; gap: 40px;
        position: relative; min-height: 700px; /* Fotoğraf için alan */
    }
    .about-text {
        direction: rtl; text-align: right; padding-top: 40px;
    }
    .about-p { margin-bottom: 20px; font-size: 16px; line-height: 1.9; color: var(--inkSoft); }
    
    .about-img-wrapper {
        position: relative; height: 100%; width: 100%;
    }
    .about-photo {
        width: 650px; height: 650px;
        background-image: url('zin.jpg'); background-size: cover; background-position: center;
        position: absolute;
        /* İstenen Milimetrik Konum */
        left: 224px; top: 27.5px;
        box-shadow: 10px 10px 0px rgba(0,0,0,0.03);
    }

    /* MODAL & FORM */
    .modal{position:fixed; inset:0; background: rgba(98, 106, 72, 0.2); backdrop-filter:blur(8px); display:flex; align-items:center; justify-content:center; z-index:100; opacity:0; pointer-events:none; transition: opacity .3s;}
    .modal.open{opacity:1; pointer-events:auto;}
    .modal-card{width:min(900px, 94%); background: #fff; border-radius: 8px; overflow: hidden; box-shadow: 0 20px 50px rgba(0,0,0,0.1); transform: translateY(20px); transition: transform .3s;}
    .modal.open .modal-card{transform: translateY(0);}
    .modal-head{padding: 20px; border-bottom: 1px solid #eee; display: flex; justify-content: space-between; direction: rtl;}
    .modal-body{padding: 30px; direction: rtl; text-align: right; max-height: 70vh; overflow-y: auto;}

    /* YENİ SEÇİM YAPISI */
    .selection-area {
        background: #f9f9f9; padding: 20px; border-radius: 8px; margin-top: 20px;
        display: grid; grid-template-columns: 1fr 1fr; gap: 20px;
    }
    .sel-group-title { font-size: 14px; color: var(--c3); margin-bottom: 10px; font-weight: 600; }
    
    .check-item {
        display: flex; align-items: center; gap: 10px; padding: 12px; background: #fff; 
        border: 1px solid #eee; border-radius: 6px; margin-bottom: 8px; cursor: pointer; transition: all 0.2s;
    }
    .check-item:hover { border-color: var(--c2); }
    .check-item input { width: 18px; height: 18px; accent-color: var(--c2); margin: 0; }
    
    .hidden { display: none; }
    .price-tag { font-weight: bold; color: var(--c2); margin-right: auto; font-size: 14px; }

    .btn-submit {
        width: 100%; padding: 16px; background: var(--c3); color: #fff; border: none; font-size: 16px; cursor: pointer; margin-top: 20px;
    }

    /* RESPONSIVE */
    @media (max-width: 1200px) {
        :root{ --side-margin: 20px; } /* Mobilde boşluğu düşür */
        .about-photo { width: 100%; height: auto; aspect-ratio: 1/1; position: static; }
        .about-layout { grid-template-columns: 1fr; }
        .sessions-grid { flex-direction: column; align-items: center; }
        .session-card { width: 100%; flex: auto; }
        nav { display: none; } /* Mobilde menü gizle (basitlik için) veya hamburger yap */
    }

    /* INPUT STYLES */
    input[type="text"], input[type="email"], input[type="tel"], textarea, select {
        width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 4px; margin-bottom: 12px;
        font-family: inherit; text-align: right;
    }
  </style>
</head>

<body>

  <header>
    <div class="header-inner">
      <nav>
        <a class="nav-item" href="#hero">مين أنا؟</a>
        <a class="nav-item" href="#seanslar">اللقاءات الفردية</a>
        <a class="nav-item" onclick="openModal()">تواصل</a>
      </nav>

      <div class="logo-block">
        <div class="logo-top">Zîn</div>
        <div class="logo-sep"></div>
        <div class="logo-ar">زين</div>
      </div>
    </div>
  </header>

  <main>
    <section id="hero">
        <div class="hero-bg"></div>
        <div class="hero-overlay"></div>
        <div class="hero-content">
            <h1 class="motto-text">
                "السكون هو المفتاح الذي يفتح كل الأبواب المغلقة في داخلك."
                <br>
                <span style="font-size: 0.6em; font-weight: 300; opacity: 0.8;">(Sessizlik, içindeki tüm kapalı kapıları açan anahtardır.)</span>
            </h1>
        </div>
        <button class="scroll-btn" onclick="document.getElementById('seanslar').scrollIntoView()">اللقاءات الفردية</button>
    </section>

    <section id="seanslar">
        <div class="section-head"><h2>اللقاءات الفردية</h2></div>
        <div class="sessions-grid">
            <div class="session-card" onclick="openModal('seans1')">
                <div class="card-img" id="img-s1"></div>
                <div class="card-meta">
                    <div class="card-title">لقاء "سكينة"</div>
                    <div class="card-desc">نسمة هوا لقلبك. بنتحرر من وجع قديم، وبنفرغ التقل اللي بصدرك لترتاح روحك وتصفى.</div>
                </div>
            </div>

            <div class="session-card" onclick="openModal('seans2')">
                <div class="card-img" id="img-s2"></div>
                <div class="card-meta">
                    <div class="card-title">لقاء "العبور"</div>
                    <div class="card-desc">الرحلة المتكاملة. لقاء يجمع بين راحة القلب ونور العقل لخطوة كبيرة نحو نسختك الجديدة.</div>
                </div>
            </div>
        </div>
    </section>

    <section id="hakkimda">
        <div class="section-head"><h2>مين أنا؟</h2></div>
        <div class="about-layout">
            <div class="about-text">
                <p class="about-p">قبل عشر سنين، كنت واقفة بنفس المكان اللي إنتي فيه اليوم؛ بعرف تماماً شو يعني يكون الطريق غبش والقلب تقيل. الحياة ما كانت وردية ولا سهلة، والفرص ما انمدت لي على طبق من ذهب، بس أنا اخترت إني حاول وأمشي رغم الخوف.</p>
                <p class="about-p">اسمي زين، وخبرتي بالحياة هي اللي علمتني قبل كتبي ودراستي. بآمن إنو السعي هو المفتاح، وإنو أصعب تجاربنا هي اللي بتصنع أقوى بداياتنا. شغفي بالحياة بيخليني أشوف الجمال حتى بالأماكن المنسية، ورسالتي اليوم هي إني ساندك لتكتشفي القوة اللي جواتك.</p>
                <button class="btn-submit" style="width: auto; margin-top: 20px;" onclick="openModal()">تواصلي معي</button>
            </div>
            <div class="about-img-wrapper">
                <div class="about-photo"></div>
            </div>
        </div>
    </section>
  </main>

  <div class="modal" id="contactModal">
    <div class="modal-card">
      <div class="modal-head">
        <strong>حجز موعد</strong>
        <button onclick="closeModal()" style="border:none; bg:none; cursor:pointer;">✕</button>
      </div>
      <div class="modal-body">
        <form id="contactForm">
          <div style="display:grid; grid-template-columns:1fr 1fr; gap:15px;">
             <div><label>الاسم</label><input id="firstName" required type="text"></div>
             <div><label>الكنية</label><input id="lastName" required type="text"></div>
          </div>
          
          <label>الدولة & الهاتف</label>
          <div style="display:flex; gap:10px;">
             <select id="phonePrefix" style="width:120px;"></select>
             <input id="phone" required type="tel" placeholder="5xx xxx xx xx">
          </div>
          
          <label>البريد الإلكتروني</label>
          <input id="email" required type="email">

          <div class="selection-area">
             <div class="step-1">
                <div class="sel-group-title">1. اختر اللقاء (Seans Seçin)</div>
                <label class="check-item">
                    <input type="checkbox" name="main_session" value="seans1" onchange="handleSessionChange(this)">
                    <span>لقاء "سكينة"</span>
                </label>
                <label class="check-item">
                    <input type="checkbox" name="main_session" value="seans2" onchange="handleSessionChange(this)">
                    <span>لقاء "العبور"</span>
                </label>
             </div>

             <div class="step-2 hidden" id="typeSelection">
                <div class="sel-group-title">2. اختر النوع (Tip Seçin)</div>
                <label class="check-item">
                    <input type="checkbox" name="sub_type" value="tekli" onchange="handleTypeChange(this)">
                    <span>جلسة واحدة (Tekli)</span>
                    <span class="price-tag" id="price-tekli"></span>
                </label>
                <label class="check-item">
                    <input type="checkbox" name="sub_type" value="uclu" onchange="handleTypeChange(this)">
                    <span>باقة 3 جلسات (3'lü Paket)</span>
                    <span class="price-tag" id="price-uclu"></span>
                </label>
             </div>
          </div>

          <label style="margin-top:15px;">رسالة (اختياري)</label>
          <textarea id="message" rows="3"></textarea>

          <button type="submit" class="btn-submit" id="submitBtn">إرسال (Gönder)</button>
        </form>
      </div>
    </div>
  </div>

  <footer>
     <div class="footer-inner">
        <div class="social">
            <a href="#" class="icon-btn">IG</a>
            <a href="#" class="icon-btn">TT</a>
        </div>
     </div>
  </footer>

  <script>
    // ÜLKE KODLARI
    const COUNTRIES_URL = "https://gist.githubusercontent.com/devhammed/78cfbee0c36dfdaa4fce7e79c0d39208/raw/449258552611926be9ee7a8b4acc2ed9b2243a97/countries.json";
    async function loadCountries(){
       const res = await fetch(COUNTRIES_URL); const list = await res.json();
       list.sort((a,b)=>a.name.localeCompare(b.name));
       const pSel = document.getElementById('phonePrefix');
       list.forEach(c => {
          pSel.innerHTML += `<option value="${c.dial_code}">${c.dial_code} - ${c.name}</option>`;
       });
       pSel.value="+90";
    }
    loadCountries();

    // MODAL İŞLEMLERİ
    const modal = document.getElementById('contactModal');
    function openModal(preselect){ 
        modal.classList.add('open'); 
        if(preselect) {
            // İstenirse karttan tıklanınca otomatik seçtirilebilir
            const checkbox = document.querySelector(`input[value="${preselect}"]`);
            if(checkbox) { checkbox.checked = true; handleSessionChange(checkbox); }
        }
    }
    function closeModal(){ modal.classList.remove('open'); document.getElementById('contactForm').reset(); resetSelection(); }
    window.onclick = function(e){ if(e.target == modal) closeModal(); }

    // SEÇİM MANTIĞI (CHECKBOX DAVRANIŞLI RADIO)
    let selectedSession = null;
    let selectedType = null;

    const PRICES = {
        'seans1': { tekli: 110, uclu: 295 },
        'seans2': { tekli: 147, uclu: 395 }
    };

    function handleSessionChange(checkbox) {
        // Sadece bir tane seçilmesine izin ver
        document.querySelectorAll('input[name="main_session"]').forEach(cb => {
            if(cb !== checkbox) cb.checked = false;
        });

        if(checkbox.checked) {
            selectedSession = checkbox.value;
            document.getElementById('typeSelection').classList.remove('hidden');
            
            // Fiyatları güncelle
            document.getElementById('price-tekli').textContent = PRICES[selectedSession].tekli + '$';
            document.getElementById('price-uclu').textContent = PRICES[selectedSession].uclu + '$';
            
            // Alt seçimleri sıfırla
            document.querySelectorAll('input[name="sub_type"]').forEach(cb => cb.checked = false);
            selectedType = null;
        } else {
            resetSelection();
        }
    }

    function handleTypeChange(checkbox) {
        document.querySelectorAll('input[name="sub_type"]').forEach(cb => {
            if(cb !== checkbox) cb.checked = false;
        });
        selectedType = checkbox.checked ? checkbox.value : null;
    }

    function resetSelection() {
        selectedSession = null;
        selectedType = null;
        document.getElementById('typeSelection').classList.add('hidden');
        document.querySelectorAll('input[type="checkbox"]').forEach(cb => cb.checked = false);
    }

    // FORM GÖNDERİMİ
    document.getElementById('contactForm').addEventListener('submit', async (e) => {
        e.preventDefault();
        
        if(!selectedSession || !selectedType) {
            alert("الرجاء اختيار نوع الجلسة (Lütfen seans ve paket tipini seçiniz.)");
            return;
        }

        // Backend'in beklediği formatta anahtar oluştur (Örn: seans-1-tekli)
        // seans1 -> seans-1 dönüşümü
        const sKey = selectedSession === 'seans1' ? 'seans-1' : 'seans-2';
        const finalKey = `${sKey}-${selectedType}`; // seans-1-tekli

        const btn = document.getElementById('submitBtn');
        btn.disabled = true; btn.textContent = "...";

        const formData = {
            firstName: document.getElementById('firstName').value,
            lastName: document.getElementById('lastName').value,
            phonePrefix: document.getElementById('phonePrefix').value,
            phoneRaw: document.getElementById('phone').value,
            email: document.getElementById('email').value,
            message: document.getElementById('message').value,
            sessions: [finalKey], // Backend bu anahtarı tanıyacak
            packages: []
        };

        try {
            await fetch('/api/lead', {
                method:'POST', 
                headers:{'Content-Type':'application/json'},
                body: JSON.stringify(formData)
            });
            alert("شكراً لتواصلك الطيب! ✨ (Mesajınız alındı)");
            closeModal();
        } catch(err) {
            alert("Hata oluştu.");
        } finally {
            btn.disabled = false; btn.textContent = "إرسال (Gönder)";
        }
    });

  </script>
</body>
</html>
